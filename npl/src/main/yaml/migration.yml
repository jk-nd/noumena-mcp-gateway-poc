$schema: https://documentation.noumenadigital.com/schemas/migration-schema-v2.yml

changesets:
  - name: mcp-1.0
    changes:
      - migrate:
          sources:
            - ../npl-1.0
          rules: rules.yml

  # V2: Added per-service ToolPolicy, transparent proxy architecture
  - name: mcp-2.0-tool-policy
    changes:
      - migrate:
          sources:
            - ../npl-1.0
          rules: rules.yml

  # V3: Added per-user UserRegistry and UserToolAccess protocols
  - name: mcp-3.0-user-access
    changes:
      - migrate:
          sources:
            - ../npl-1.0
          rules: rules.yml

  # V4: Allow gateway to read user access lists; remove legacy agent role
  - name: mcp-4.0-gateway-access
    changes:
      - migrate:
          sources:
            - ../npl-1.0
          rules: rules.yml

  # V5: Allow gateway to read ServiceRegistry (enabled services visibility)
  - name: mcp-5.0-registry-gateway-access
    changes:
      - migrate:
          sources:
            - ../npl-1.0
          rules: rules.yml

  # V6: Replace 4 protocols with unified PolicyStore singleton + contextual routing
  - name: mcp-6.0-policy-store
    changes:
      - migrate:
          sources:
            - ../npl-1.0
          rules: rules.yml
