# Dynamic MCP Service Configuration
# This file defines all upstream services and their tools.
# The Gateway reads this config for tool listing and upstream routing.

services:
  - name: "notification-test"
    displayName: "Notification Test"
    type: "MCP_STDIO"
    enabled: false
    command: "docker run -i --rm mcp-notification-test"
    args: []
    requiresCredentials: false
    description: "Test server for server-initiated MCP notifications. Provides tools to trigger notifications/tools/list_changed and logging notifications."
    tools:
      - name: "echo"
        description: "Echo back the provided message (standard request-response)"
        inputSchema:
          type: "object"
          properties:
            message:
              type: "string"
              description: "Message to echo back"
          required:
            - "message"
        enabled: true
      - name: "trigger_notification"
        description: "Triggers a server-initiated notifications/tools/list_changed notification after responding. This tests the Gateway notification forwarding pipeline."
        inputSchema:
          type: "object"
          properties:
            delay_ms:
              type: "number"
              description: "Delay in milliseconds before sending the notification (default: 1000)"
          required: []
        enabled: true
      - name: "send_log"
        description: "Sends a server-initiated notifications/message (logging) notification after responding. This tests forwarding of log-level notifications."
        inputSchema:
          type: "object"
          properties:
            level:
              type: "string"
              description: "Log level: debug, info, warning, error (default: info)"
            log_message:
              type: "string"
              description: "The log message to send (default: \"Hello from upstream MCP!\")"
          required: []
        enabled: true
  - name: "duckduckgo"
    displayName: "DuckDuckGo"
    type: "MCP_STDIO"
    enabled: false
    command: "docker run -i --rm mcp/duckduckgo"
    args: []
    requiresCredentials: false
    description: "Web search capabilities through DuckDuckGo, with content fetching."
    tools:
      - name: "search"
        description: "Search DuckDuckGo and return formatted results.      Args:         query: The search query string         max_results: Maximum number of results to return (default: 10)         ctx: MCP context for logging"
        inputSchema:
          type: "object"
          properties:
            query:
              type: "string"
              description: ""
            max_results:
              type: "integer"
              description: ""
          required:
            - "query"
        enabled: true
      - name: "fetch_content"
        description: "Fetch and parse content from a webpage URL.      Args:         url: The webpage URL to fetch content from         ctx: MCP context for logging"
        inputSchema:
          type: "object"
          properties:
            url:
              type: "string"
              description: ""
          required:
            - "url"
        enabled: true
  - name: "github"
    displayName: "Github"
    type: "MCP_STDIO"
    enabled: false
    command: "docker run -i --rm mcp/github"
    args: []
    requiresCredentials: false
    description: "Tools for interacting with the GitHub API, enabling file operations, repository management, searc..."
    tools:
      - name: "create_or_update_file"
        description: "Create or update a single file in a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            path:
              type: "string"
              description: "Path where to create/update the file"
            content:
              type: "string"
              description: "Content of the file"
            message:
              type: "string"
              description: "Commit message"
            branch:
              type: "string"
              description: "Branch to create/update the file in"
            sha:
              type: "string"
              description: "SHA of the file being replaced (required when updating existing files)"
          required:
            - "owner"
            - "repo"
            - "path"
            - "content"
            - "message"
            - "branch"
        enabled: false
      - name: "search_repositories"
        description: "Search for GitHub repositories"
        inputSchema:
          type: "object"
          properties:
            query:
              type: "string"
              description: "Search query (see GitHub search syntax)"
            page:
              type: "number"
              description: "Page number for pagination (default: 1)"
            perPage:
              type: "number"
              description: "Number of results per page (default: 30, max: 100)"
          required:
            - "query"
        enabled: false
      - name: "create_repository"
        description: "Create a new GitHub repository in your account"
        inputSchema:
          type: "object"
          properties:
            name:
              type: "string"
              description: "Repository name"
            description:
              type: "string"
              description: "Repository description"
            private:
              type: "boolean"
              description: "Whether the repository should be private"
            autoInit:
              type: "boolean"
              description: "Initialize with README.md"
          required:
            - "name"
        enabled: false
      - name: "get_file_contents"
        description: "Get the contents of a file or directory from a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            path:
              type: "string"
              description: "Path to the file or directory"
            branch:
              type: "string"
              description: "Branch to get contents from"
          required:
            - "owner"
            - "repo"
            - "path"
        enabled: false
      - name: "push_files"
        description: "Push multiple files to a GitHub repository in a single commit"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            branch:
              type: "string"
              description: "Branch to push to (e.g., 'main' or 'master')"
            files:
              type: "array"
              description: "Array of files to push"
            message:
              type: "string"
              description: "Commit message"
          required:
            - "owner"
            - "repo"
            - "branch"
            - "files"
            - "message"
        enabled: false
      - name: "create_issue"
        description: "Create a new issue in a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: ""
            repo:
              type: "string"
              description: ""
            title:
              type: "string"
              description: ""
            body:
              type: "string"
              description: ""
            assignees:
              type: "array"
              description: ""
            milestone:
              type: "number"
              description: ""
            labels:
              type: "array"
              description: ""
          required:
            - "owner"
            - "repo"
            - "title"
        enabled: false
      - name: "create_pull_request"
        description: "Create a new pull request in a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            title:
              type: "string"
              description: "Pull request title"
            body:
              type: "string"
              description: "Pull request body/description"
            head:
              type: "string"
              description: "The name of the branch where your changes are implemented"
            base:
              type: "string"
              description: "The name of the branch you want the changes pulled into"
            draft:
              type: "boolean"
              description: "Whether to create the pull request as a draft"
            maintainer_can_modify:
              type: "boolean"
              description: "Whether maintainers can modify the pull request"
          required:
            - "owner"
            - "repo"
            - "title"
            - "head"
            - "base"
        enabled: false
      - name: "fork_repository"
        description: "Fork a GitHub repository to your account or specified organization"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            organization:
              type: "string"
              description: "Optional: organization to fork to (defaults to your personal account)"
          required:
            - "owner"
            - "repo"
        enabled: false
      - name: "create_branch"
        description: "Create a new branch in a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            branch:
              type: "string"
              description: "Name for the new branch"
            from_branch:
              type: "string"
              description: "Optional: source branch to create from (defaults to the repository's default branch)"
          required:
            - "owner"
            - "repo"
            - "branch"
        enabled: false
      - name: "list_commits"
        description: "Get list of commits of a branch in a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: ""
            repo:
              type: "string"
              description: ""
            sha:
              type: "string"
              description: ""
            page:
              type: "number"
              description: ""
            perPage:
              type: "number"
              description: ""
          required:
            - "owner"
            - "repo"
        enabled: false
      - name: "list_issues"
        description: "List issues in a GitHub repository with filtering options"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: ""
            repo:
              type: "string"
              description: ""
            direction:
              type: "string"
              description: ""
            labels:
              type: "array"
              description: ""
            page:
              type: "number"
              description: ""
            per_page:
              type: "number"
              description: ""
            since:
              type: "string"
              description: ""
            sort:
              type: "string"
              description: ""
            state:
              type: "string"
              description: ""
          required:
            - "owner"
            - "repo"
        enabled: false
      - name: "update_issue"
        description: "Update an existing issue in a GitHub repository"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: ""
            repo:
              type: "string"
              description: ""
            issue_number:
              type: "number"
              description: ""
            title:
              type: "string"
              description: ""
            body:
              type: "string"
              description: ""
            assignees:
              type: "array"
              description: ""
            milestone:
              type: "number"
              description: ""
            labels:
              type: "array"
              description: ""
            state:
              type: "string"
              description: ""
          required:
            - "owner"
            - "repo"
            - "issue_number"
        enabled: false
      - name: "add_issue_comment"
        description: "Add a comment to an existing issue"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: ""
            repo:
              type: "string"
              description: ""
            issue_number:
              type: "number"
              description: ""
            body:
              type: "string"
              description: ""
          required:
            - "owner"
            - "repo"
            - "issue_number"
            - "body"
        enabled: false
      - name: "search_code"
        description: "Search for code across GitHub repositories"
        inputSchema:
          type: "object"
          properties:
            q:
              type: "string"
              description: ""
            order:
              type: "string"
              description: ""
            page:
              type: "number"
              description: ""
            per_page:
              type: "number"
              description: ""
          required:
            - "q"
        enabled: false
      - name: "search_issues"
        description: "Search for issues and pull requests across GitHub repositories"
        inputSchema:
          type: "object"
          properties:
            q:
              type: "string"
              description: ""
            order:
              type: "string"
              description: ""
            page:
              type: "number"
              description: ""
            per_page:
              type: "number"
              description: ""
            sort:
              type: "string"
              description: ""
          required:
            - "q"
        enabled: false
      - name: "search_users"
        description: "Search for users on GitHub"
        inputSchema:
          type: "object"
          properties:
            q:
              type: "string"
              description: ""
            order:
              type: "string"
              description: ""
            page:
              type: "number"
              description: ""
            per_page:
              type: "number"
              description: ""
            sort:
              type: "string"
              description: ""
          required:
            - "q"
        enabled: false
      - name: "get_issue"
        description: "Get details of a specific issue in a GitHub repository."
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: ""
            repo:
              type: "string"
              description: ""
            issue_number:
              type: "number"
              description: ""
          required:
            - "owner"
            - "repo"
            - "issue_number"
        enabled: true
      - name: "get_pull_request"
        description: "Get details of a specific pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
      - name: "list_pull_requests"
        description: "List and filter repository pull requests"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            state:
              type: "string"
              description: "State of the pull requests to return"
            head:
              type: "string"
              description: "Filter by head user or head organization and branch name"
            base:
              type: "string"
              description: "Filter by base branch name"
            sort:
              type: "string"
              description: "What to sort results by"
            direction:
              type: "string"
              description: "The direction of the sort"
            per_page:
              type: "number"
              description: "Results per page (max 100)"
            page:
              type: "number"
              description: "Page number of the results"
          required:
            - "owner"
            - "repo"
        enabled: false
      - name: "create_pull_request_review"
        description: "Create a review on a pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
            commit_id:
              type: "string"
              description: "The SHA of the commit that needs a review"
            body:
              type: "string"
              description: "The body text of the review"
            event:
              type: "string"
              description: "The review action to perform"
            comments:
              type: "array"
              description: "Comments to post as part of the review (specify either position or line, not both)"
          required:
            - "owner"
            - "repo"
            - "pull_number"
            - "body"
            - "event"
        enabled: false
      - name: "merge_pull_request"
        description: "Merge a pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
            commit_title:
              type: "string"
              description: "Title for the automatic commit message"
            commit_message:
              type: "string"
              description: "Extra detail to append to automatic commit message"
            merge_method:
              type: "string"
              description: "Merge method to use"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
      - name: "get_pull_request_files"
        description: "Get the list of files changed in a pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
      - name: "get_pull_request_status"
        description: "Get the combined status of all status checks for a pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
      - name: "update_pull_request_branch"
        description: "Update a pull request branch with the latest changes from the base branch"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
            expected_head_sha:
              type: "string"
              description: "The expected SHA of the pull request's HEAD ref"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
      - name: "get_pull_request_comments"
        description: "Get the review comments on a pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
      - name: "get_pull_request_reviews"
        description: "Get the reviews on a pull request"
        inputSchema:
          type: "object"
          properties:
            owner:
              type: "string"
              description: "Repository owner (username or organization)"
            repo:
              type: "string"
              description: "Repository name"
            pull_number:
              type: "number"
              description: "Pull request number"
          required:
            - "owner"
            - "repo"
            - "pull_number"
        enabled: false
  - name: "slack"
    displayName: "Slack"
    type: "MCP_STDIO"
    enabled: true
    command: "docker run -i --rm mcp/slack"
    args: []
    requiresCredentials: false
    description: "Interact with Slack Workspaces over the Slack API."
    tools:
      - name: "slack_default"
        description: "Default tool for slack - run 'Discover tools' to find actual tools"
        inputSchema:
          type: "object"
          properties: {}
          required: []
        enabled: true
user_access:
  default_template:
    enabled: true
    description: "Default tool access for new users"
    tools:
      duckduckgo:
        - "search"
  users:
    - userId: "admin@acme.com"
      keycloakId: "aa0e467f-68b6-4a85-9057-4e809a66452c"
      displayName: "Admin User"
      createdAt: "2026-02-07T20:26:16.025Z"
      tools: {}
      vaultPaths: {}
    - userId: "user@acme.com"
      keycloakId: "4eb414c4-7a23-41e4-b803-61ab0caee153"
      displayName: "Regular User"
      createdAt: "2026-02-07T20:26:20.548Z"
      tools: {}
      vaultPaths: {}
    - userId: "agent@acme.com"
      keycloakId: "2bec753b-b5be-4a2c-9a68-1f9f5621993f"
      displayName: "AI Agent"
      createdAt: "2026-02-07T20:56:13.671Z"
      tools:
        slack:
          - "*"
      vaultPaths: {}
    - userId: "charlie@acme.com"
      keycloakId: "3c54ae83-107c-4531-9940-3b4e76d380d8"
      displayName: "Charlie McDonald"
      createdAt: "2026-02-07T21:41:17.408Z"
      tools:
        duckduckgo:
          - "*"
        github:
          - "*"
      vaultPaths: {}
