# Credential Proxy Dockerfile â€” V2 Credential Injection

FROM gradle:8.5-jdk17 AS builder
WORKDIR /app
COPY . .
RUN gradle :credential-proxy:shadowJar --no-daemon

FROM eclipse-temurin:17-jre
WORKDIR /app

# Copy fat JAR
COPY --from=builder /app/credential-proxy/build/libs/credential-proxy-*-all.jar credential-proxy.jar

# Copy configs
COPY configs/credentials.yaml /app/configs/

EXPOSE 9002

ENTRYPOINT ["java", "-jar", "credential-proxy.jar"]
