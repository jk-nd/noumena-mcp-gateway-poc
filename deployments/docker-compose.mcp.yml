# Upstream MCP Servers
# Start with: docker compose -p mcp -f docker-compose.mcp.yml up -d
#
# V2: These containers connect to the Gateway's backend-net.
# Agents cannot reach them directly — only the Gateway can.

name: mcp

services:
  # ─────────────────────────────────────────────────────────────────────────
  # Atlassian MCP (Jira, Confluence)
  # ─────────────────────────────────────────────────────────────────────────
  atlassian:
    image: mcp/atlassian
    stdin_open: true
    tty: true
    restart: unless-stopped
    environment:
      - ATLASSIAN_URL=${ATLASSIAN_URL:-}
      - ATLASSIAN_USERNAME=${ATLASSIAN_USERNAME:-}
      - ATLASSIAN_API_TOKEN=${ATLASSIAN_API_TOKEN:-}
    networks:
      - backend-net

  # ─────────────────────────────────────────────────────────────────────────
  # Fetch MCP (HTTP requests)
  # ─────────────────────────────────────────────────────────────────────────
  fetch:
    image: mcp/fetch
    stdin_open: true
    tty: true
    restart: unless-stopped
    networks:
      - backend-net

  # ─────────────────────────────────────────────────────────────────────────
  # Add more MCP servers here as needed
  # ─────────────────────────────────────────────────────────────────────────
  # Example:
  # 
  # github:
  #   image: mcp/github
  #   stdin_open: true
  #   tty: true
  #   restart: unless-stopped
  #   environment:
  #     - GITHUB_TOKEN=${GITHUB_TOKEN:-}
  #   networks:
  #     - backend-net

networks:
  backend-net:
    # Connect to the Gateway stack's backend network
    external: true
    name: gateway_backend-net
